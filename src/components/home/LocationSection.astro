---
import { Icon } from 'astro-icon/components';

import { siteConfig } from '../../utils/content';
import type { LocationSection } from '../../types';

const { location } = Astro.props as { location: LocationSection };
const { contact, brand } = siteConfig;

const mapQuery = encodeURIComponent(`${brand.name} ${contact.address}`);
const mapEmbedSrc = `https://www.google.com/maps?q=${mapQuery}&hl=ro&z=16&output=embed`;
---

<section id={location.id} class="bg-white">
  <div class="mx-auto max-w-screen-xl px-4 py-24 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-2xl text-center">
      <p class="text-sm font-semibold uppercase tracking-[0.35em] text-primary">
        Locație
      </p>
      <h2 class="mt-4 font-heading text-3xl font-bold text-slate-900 sm:text-4xl">
        {location.title}
      </h2>
      <p class="mt-3 text-base text-slate-600">
        Ne găsești în centrul Ploieștiului, într-un spațiu liniștit dedicat relaxării tale.
      </p>
    </div>

    <div class="mt-16 grid gap-10 lg:grid-cols-2">
      <div class="space-y-8">
        <ul class="space-y-4 text-sm text-slate-600">
          {location.details.map((detail) => (
            <li class="flex items-start gap-4 rounded-2xl border border-slate-200 bg-slate-50 p-4">
              <span class="mt-1 inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10 text-primary">
                <Icon name={detail.icon} class="h-5 w-5" />
              </span>
              <div>
                <h3 class="font-semibold text-slate-900">{detail.title}</h3>
                <p class="mt-1 text-slate-600">
                  {detail.href ? (
                    <a href={detail.href} class="hover:text-primary" target="_blank" rel="noopener">
                      {detail.description}
                    </a>
                  ):detail.description}
                </p>
              </div>
            </li>
          ))}
        </ul>
        <div class="flex flex-wrap gap-4">
          <a
            href={contact.mapsUrl}
            class="inline-flex items-center gap-2 rounded-full bg-primary px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-primary/30 transition hover:opacity-90"
            target="_blank"
            rel="noopener"
          >
            <Icon name="tabler:map" class="h-5 w-5" />
            <span>Deschide în Google Maps</span>
          </a>
          <a
            href={`tel:${contact.phone.replace(/\\s+/g, '')}`}
            class="inline-flex items-center gap-2 rounded-full border border-primary px-6 py-3 text-sm font-semibold text-primary transition hover:bg-primary hover:text-white"
          >
            <Icon name="tabler:phone" class="h-5 w-5" />
            <span>{contact.phoneDisplay}</span>
          </a>
        </div>
      </div>

      <div class="relative overflow-hidden rounded-3xl shadow-xl shadow-slate-200">
        <iframe
          src={mapEmbedSrc}
          width="100%"
          height="450"
          loading="lazy"
          allowfullscreen
          referrerpolicy="no-referrer-when-downgrade"
          title="Harta Bali Zen"
          class="h-full w-full border-0"
        ></iframe>
      </div>
    </div>
  </div>
</section>
