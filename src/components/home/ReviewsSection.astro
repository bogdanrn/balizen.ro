---
import { Icon } from 'astro-icon/components';

import { siteConfig } from '../../utils/content';
import type { Review } from '../../types';

const { reviews } = Astro.props as { reviews: Review[] };
const { contact } = siteConfig;
---

<section class="bg-slate-100" aria-labelledby="reviews-heading">
  <div class="mx-auto max-w-screen-xl px-4 py-24 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-2xl text-center">
      <p class="text-sm font-semibold uppercase tracking-[0.35em] text-primary">
        Recenzii
      </p>
      <h2 id="reviews-heading" class="mt-4 font-heading text-3xl font-bold text-slate-900 sm:text-4xl">
        Ce spun clienții noștri
      </h2>
      <p class="mt-3 text-base text-slate-600">
        Fiecare experiență la Bali Zen este unică. Descoperă ce spun clienții noștri despre momentele de relaxare petrecute în studio.
      </p>
    </div>

    <div class="mt-16 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {reviews.map((review) => (
        <figure class="flex h-full flex-col justify-between rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-lg">
          <div class="space-y-4">
            <div class="flex items-center gap-2" aria-label={`${review.rating} din 5 stele`}>
              {Array.from({ length: 5 }, (_, index) => (
                <Icon
                  name={index < review.rating ? 'tabler:star-filled' : 'tabler:star'}
                  class={`h-5 w-5 ${index < review.rating ? 'text-amber-400' : 'text-slate-300'}`}
                />
              ))}
            </div>
            <blockquote class="text-sm leading-relaxed text-slate-700">“{review.text}”</blockquote>
          </div>
          <figcaption class="mt-6 text-sm font-semibold text-slate-900">
            {review.author}
            <span class="block text-xs font-medium uppercase tracking-wide text-slate-400">
              {new Date(review.date).toLocaleDateString('ro-RO', {
                day: '2-digit',
                month: 'short',
                year: 'numeric',
              })}
            </span>
          </figcaption>
        </figure>
      ))}
    </div>

    <div class="mt-12 text-center">
      <a
        href={contact.googleReviewsUrl}
        class="inline-flex items-center gap-2 rounded-full bg-white px-6 py-3 text-sm font-semibold text-primary shadow-lg shadow-primary/20 transition hover:text-primary/80"
        target="_blank"
        rel="noopener"
      >
        <Icon name="tabler:message-star" class="h-5 w-5" />
        <span>Vezi toate recenziile pe Google</span>
      </a>
    </div>
  </div>
</section>
