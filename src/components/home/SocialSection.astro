---
import { Icon } from 'astro-icon/components';

import type { SocialSectionBlock } from '../../types';

const { social } = Astro.props as { social: SocialSectionBlock };

const formatHostname = (href: string) => {
  try {
    return new URL(href).hostname.replace(/^www\./, '');
  } catch {
    return href;
  }
};
---

<section id={social.id} class="relative overflow-hidden bg-white text-slate-900">
  <div class="absolute inset-0">
    <div class="absolute inset-0 bg-gradient-to-br from-white via-white to-slate-50"></div>
    <div class="absolute -left-24 top-8 h-64 w-64 rounded-full bg-primary/10 blur-3xl"></div>
    <div class="absolute -right-32 bottom-0 h-80 w-80 rounded-full bg-primary/15 blur-3xl"></div>
  </div>

  <div class="relative mx-auto max-w-screen-xl px-4 py-20 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-3xl space-y-4 text-center">
      <h2 class="font-heading text-3xl font-bold sm:text-4xl">{social.title}</h2>
      <p class="text-base text-slate-600">{social.subtitle}</p>
    </div>

    <div class="mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {
        social.links.map((link) => (
          <a
            href={link.href}
            target="_blank"
            rel="noopener"
            aria-label={link.label}
            class="group relative overflow-hidden rounded-2xl border border-slate-200 bg-white p-6 shadow-lg shadow-slate-200/60 transition hover:-translate-y-1 hover:border-primary/60 hover:shadow-xl hover:shadow-primary/20"
          >
            <div class="flex items-center gap-4">
              <span class="flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 text-primary transition group-hover:bg-primary/15">
                <Icon name={link.icon} class="h-6 w-6" />
              </span>
              <div class="flex flex-col">
                <span class="text-lg font-semibold text-slate-900">{link.label}</span>
                {link.handle && <span class="text-sm text-slate-600">{link.handle}</span>}
              </div>
            </div>

            <div class="mt-6 flex items-center justify-between text-sm text-slate-600">
              <span class="rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold uppercase tracking-[0.18em] text-slate-600">
                {formatHostname(link.href)}
              </span>
              <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary transition group-hover:translate-x-0.5 group-hover:-translate-y-0.5 group-hover:bg-primary group-hover:text-white group-hover:shadow-lg group-hover:shadow-primary/40">
                <Icon name="tabler:arrow-up-right" class="h-5 w-5" />
              </span>
            </div>
          </a>
        ))
      }
    </div>
  </div>
</section>
